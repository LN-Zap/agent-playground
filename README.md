# Agent Playground

[![Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://codespaces.new/LN-Zap/agent-playground?quickstart=1)

A sandbox for experimenting with AI agent workflows and multi-agent environments. This project serves as a reference for building and maintaining consistent, provider-agnostic agent ecosystems.

## Core Philosophy

The agent ecosystem is young and fragmented, with competing standards for how tools store skills and rules. This repo exists as a boilerplate for dealing with that complexity — keeping flexibility across agent harnesses, avoiding lock-in, and resisting proprietary formats.

- **Define Once, Support Everywhere**: Rules and capabilities are defined centrally in [.rulesync](.rulesync) and distributed to all supported agents.
- **Provider Agnostic**: Skills and instructions are managed independently of any specific AI platform.
- **Automated Synchronization**: [rulesync](https://github.com/dyoshikawa/rulesync) propagates rules, skills, and configurations to all agent interfaces.
- **Declarative Sources**: Remote skill repositories are declared in [rulesync.jsonc](rulesync.jsonc) and fetched automatically with lockfile-based determinism.

## Key Components

- **Skills**: Reusable capability modules declared in [rulesync.jsonc](rulesync.jsonc) and fetched from remote GitHub repositories. Distributed to all agents via rulesync.
- **Rules**: Provider-agnostic instructions defined in [.rulesync/rules](.rulesync/rules) and generated into each agent's native format.
- **MCP Servers**: External tool integrations defined in [.rulesync/mcp.json](.rulesync/mcp.json) and synchronized across agents.

## Supported Agents

| Agent | Target | Output |
| --- | --- | --- |
| GitHub Copilot | `copilot` | `.github/copilot-instructions.md`, `.github/skills/` |
| Claude Code | `claudecode` | `CLAUDE.md`, `.claude/skills/` |
| Codex CLI | `codexcli` | `.codex/skills/` |
| Gemini CLI | `geminicli` | `GEMINI.md` |
| OpenCode | `opencode` | `opencode.json`, `.opencode/skill/` |
| AGENTS.md | `agentsmd` | `AGENTS.md` |
| Agent Skills | `agentsskills` | `.agents/skills/` |

> **Note**: `geminicli` does not yet generate `.gemini/skills/` — see [upstream issue](https://github.com/dyoshikawa/rulesync/issues/974). Gemini CLI has native skills support but rulesync currently classifies it as simulated.

## Configuration

All configuration lives in [rulesync.jsonc](rulesync.jsonc):

- **`targets`** — Which agent formats to generate.
- **`features`** — Which features to enable (`rules`, `skills`, `mcp`, `ignore`).
- **`sources`** — Remote skill repositories to fetch from.

### Adding skills

Add a source entry to the `sources` array:

```jsonc
{ "source": "https://github.com/org/repo-name" }
```

To fetch only specific skills: `{ "source": "https://github.com/org/repo", "skills": ["skill-a", "skill-b"] }`

### Adding rules

Add or edit Markdown files in [.rulesync/rules](.rulesync/rules). Use YAML frontmatter to control targeting and scope.

### Adding MCP servers

Add server definitions to [.rulesync/mcp.json](.rulesync/mcp.json).

### Synchronizing

Run `npx rulesync generate` to regenerate all agent-specific files. With devenv, this runs automatically when `.rulesync/` or `rulesync.jsonc` changes.

> **Authentication**: Fetching skills from private repositories requires a `GITHUB_TOKEN` environment variable. In Codespaces this is provided automatically. For local development, add it to `.env` (loaded by devenv via `dotenv.enable`).

## MCP Servers

| Server | Description |
| --- | --- |
| context7 | Library and documentation context retrieval. |
| figma-desktop | Figma desktop design context and asset access. |
| github | GitHub repository and workflow access. |
| playwright | Browser automation via Playwright MCP. |
| chrome-devtools | Chrome DevTools automation via MCP. |

## Getting Started

### Prerequisites

- [Nix](https://nixos.org/download.html): Declarative package manager for reproducible environments.
- [devenv.sh](https://devenv.sh/): Developer environment manager.
- [direnv](https://direnv.net/): Shell extension to automatically load the environment.

### Setup

1. Clone the repository:

   ```bash
   git clone https://github.com/LN-Zap/agent-playground.git
   cd agent-playground
   ```

1. Enable automatic environment loading with `direnv`:

   ```bash
   direnv allow
   ```

   The environment will activate automatically when you enter the directory. Alternatively, enter it manually with `devenv shell`.

   *Upon entering the environment, devenv runs `rulesync generate` automatically (see [devenv.nix](devenv.nix)). No manual synchronization is required for initial setup.*

### Dev Containers

This repository supports [Dev Containers](https://containers.dev/) via [.devcontainer.json](.devcontainer.json), generated by [devenv](https://devenv.sh/integrations/codespaces-devcontainer/). Use with VS Code or GitHub Codespaces for a preconfigured environment.

## Contributing

Contributions focusing on new provider-agnostic patterns and cross-agent workflows are welcome!
